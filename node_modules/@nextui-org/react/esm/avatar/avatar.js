import{useFocusRing as a}from"@react-aria/focus";import t,{useMemo as r,useState as s,useRef as e,useEffect as o}from"react";import{mergeProps as i}from"@react-aria/utils";import{useDOMRef as n}from"../utils/dom";import{__DEV__ as l}from"../utils/assertion";import c from"../utils/clsx";import m from"./avatar.styles";import{jsx as u}from"react/jsx-runtime";import{jsxs as p}from"react/jsx-runtime";const v=a=>(null==a?void 0:a.length)<=4?a:null==a?void 0:a.slice(0,3);export const Avatar=t.forwardRef(((t,l)=>{const{as:x,src:d,css:f,text:N,icon:g,alt:b,className:y,...A}=t,h=n(l),j=!d,[F,V]=s(!1),w=e(null),{isFocusVisible:I,focusProps:L}=a();o((()=>{var a;(null==w||null==(a=w.current)?void 0:a.complete)&&V(!0)}),[]);const P=r((()=>!F&&d?"loading":"ready"),[d,F]);return p(m,{ref:h,as:x,...i(A,L),className:c({"only-text-avatar":j},y),css:"button"===x?{appearance:"none",outline:"none",border:"none",cursor:"pointer",...f}:f,"data-state":P,isFocusVisible:I,children:[u("span",{className:"nextui-avatar-bg"}),!j&&u("img",{ref:w,alt:b,className:c("nextui-avatar-img",`nextui-avatar--${P}`,{"nextui-avatar-ready":F}),"data-state":P,src:d,onLoad:()=>V(!0)}),j&&!g&&N&&u("span",{className:"nextui-avatar-text",children:v(N)}),g&&u("span",{className:"nextui-avatar-icon",children:g})]})}));l&&(Avatar.displayName="NextUI.Avatar"),Avatar.toString=()=>".nextui-avatar";export default Avatar;