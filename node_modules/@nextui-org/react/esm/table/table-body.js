import l,{useMemo as e}from"react";import{mergeProps as o}from"@react-aria/utils";import{Loading as t}from"../index";import r from"../utils/clsx";import{StyledBaseTableCell as i,StyledTableLoadingRow as n}from"./table.styles";import a from"./table-row-group";import s from"./table-row";import d from"./table-cell";import c from"./table-checkbox-cell";import{useTableContext as u}from"./table-context";import{isInfinityScroll as m}from"./utils";import{jsx as p}from"react/jsx-runtime";import{jsxs as h}from"react/jsx-runtime";const b=({children:l,collection:b,state:y,animated:g,color:x,hasPagination:f,hideLoading:v,...S})=>{var N,w,C,j,k,H;const{currentPage:P,rowsPerPage:B}=u(),E=e((()=>m(b)),[b.body.props]),L="loading"===(null==(N=b.body)||null==(w=N.props)?void 0:w.loadingState)||"loadingMore"===(null==(C=b.body)||null==(j=C.props)?void 0:j.loadingState),M=e((()=>{const l=[...b.body.childNodes];return f?null==l?void 0:l.slice((P-1)*B,P*B):l}),[f,b,P,B]),A=e((()=>{const l=M.length;return l>=B&&!E?null:p("tr",{"aria-hidden":"true",className:"nextui-table-hidden-row",role:"row",children:p(i,{"aria-hidden":"true",colSpan:b.columnCount,css:{height:"var(--nextui--tableBodyEmptySpaceHeight)"},style:o({"--nextui--tableBodyEmptySpaceHeight":E?"var(--nextui-space-10)":`calc(${B-l} * var(--nextui-space-14))`},(null==S?void 0:S.style)||{})})})}),[b.columnCount,M,B,E]);return h(a,{as:"tbody",className:r("nextui-table-body",S.className),css:{pb:"$10",position:"relative",...S.css,...null==(k=b.body)||null==(H=k.props)?void 0:H.css},isInfinityScroll:E,onScroll:l=>{if(!E)return;const e=l.target;var o,t;e.scrollHeight-(e.scrollTop+40)<=e.clientHeight&&!L&&(null==(o=b.body)||null==(t=o.props)||null==t.onLoadMore||t.onLoadMore())},...S,children:[l,null==M?void 0:M.map((l=>l.hasChildNodes?p(s,{"aria-hidden":"false",item:l,state:y,children:[...l.childNodes].map((l=>{var e;return null!=l&&null!=(e=l.props)&&e.isSelectionCell?p(c,{animated:g,cell:l,color:x,state:y},null==l?void 0:l.key):p(d,{cell:l,state:y},null==l?void 0:l.key)}))},null==l?void 0:l.key):null)),!v&&L&&p(n,{"aria-hidden":"true",className:"nextui-table-hidden-row",isAbsolute:!E,isAtEnd:M.length>0,role:"row",children:p(i,{"aria-hidden":"true",colSpan:b.columnCount,children:p(t,{color:x})})}),A]})};b.displayName="NextUI.TableBody",b.toString=()=>".nextui-table-body";export default b;