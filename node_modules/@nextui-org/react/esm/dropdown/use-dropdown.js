import{useRef as e,useCallback as r}from"react";import{mergeProps as t}from"@react-aria/utils";import{useMenuTrigger as i}from"@react-aria/menu";import{useMenuTriggerState as o}from"@react-stately/menu";import{mergeRefs as s}from"../utils/refs";export function useDropdown(n={}){const{triggerRef:a,type:l="menu",trigger:u="press",isDisabled:m=!1,borderWeight:p,closeOnSelect:c,disableAnimation:g=!1,disableTriggerPressedAnimation:f=!1,...d}=n,b=e(null),P=a||b,y=e(null),T=e(null),h=o(n),{menuTriggerProps:A,menuProps:R}=i({type:l,trigger:u,isDisabled:m},h,P),D=r(((e={},r=null)=>{const{css:i,...o}=null!=a&&a.current?t(A,e):t(e,A);return{ref:s(b,r),css:f?i:{'&[aria-haspopup="true"]&[aria-expanded="true"]':{opacity:.7,backfaceVisibility:"hidden",transform:"translateZ(0) scale(0.97)"},...i},...o}}),[b,a,A,f]);return{...R,popoverProps:d,state:h,ref:y,onClose:h.close,autoFocus:h.focusStrategy||!0,disableAnimation:g,disableTriggerPressedAnimation:f,menuRef:y,borderWeight:p,menuPopoverRef:T,menuTriggerRef:P,closeOnSelect:c,getMenuTriggerProps:D}}