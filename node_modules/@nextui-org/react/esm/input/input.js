import e,{useEffect as t,useImperativeHandle as a,useMemo as r,useRef as l,useState as n}from"react";import{useLabel as i}from"@react-aria/label";import o from"../use-theme";import{warn as d}from"../utils/console";import s from"../utils/clear-icon";import c from"../utils/clsx";import{__DEV__ as u}from"../utils/assertion";import{StyledInput as p,StyledInputMainContainer as m,StyledInputContainer as h,StyledHelperTextContainer as f,StyledHelperText as b,StyledInputWrapper as $,StyledInputPlaceholder as g,StyledInputClearButton as y,StyledInputBlockLabel as C,StyledInputLabel as x,StyledInputContent as w}from"./input.styles";import{defaultProps as N}from"./input-props";import{jsx as v}from"react/jsx-runtime";import{jsxs as k}from"react/jsx-runtime";const S="nextui-input",R=e.forwardRef((({as:e="input",label:N,labelPlaceholder:R,labelLeft:I,labelRight:L,size:P,helperText:D,color:T,helperColor:B,status:F,contentLeft:j,contentRight:O,contentClickable:V,contentLeftStyling:q,contentRightStyling:U,onContentClick:W,initialValue:z,onChange:E,readOnly:A,value:G,onClearClick:H,clearable:J,shadow:K,animated:M,required:Q,width:X,className:Y,onBlur:Z,onFocus:_,autoComplete:ee,placeholder:te,fullWidth:ae,borderWeight:re,disabled:le,bordered:ne,underlined:ie,rounded:oe,css:de,...se},ce)=>{const ue=l(null);a(ce,(()=>ue.current));const[pe,me]=n(z),[he,fe]=n(!1),{isDark:be}=o(),$e=r((()=>void 0!==G),[G]),ge=r((()=>N||R),[N,R]),ye=r((()=>R?"":te),[te,R]),Ce=r((()=>ae?"100%":X||"initial"),[ae,X]);ie&&u&&(ne&&d("Using underlined and bordered at the same time will have no effect."),oe&&d("Using underlined and rounded at the same time will have no effect."));const xe=(e,t)=>{le||W&&W(e,t)};t((()=>{$e&&me(G)}),[$e,G]);const we=r((()=>"textarea"===e),[e]),Ne={...se,...$e?{value:pe}:{defaultValue:z}},{labelProps:ve,fieldProps:ke}=i({...Ne,label:ge}),Se=r((()=>he?"hover":le?"disabled":A?"read-only":pe?"with-value":"normal"),[he,le,A,pe]);return k(m,{borderWeight:re,className:c(`${S}-main-container`,`${S}-main-container--${Se}`),color:T,css:{width:Ce,...de},"data-state":Se,disabled:le,helperColor:B,rounded:oe,size:P,status:F,children:[ge&&v(C,{animated:M,asPlaceholder:!!R,bordered:ne,className:`${S}-block-label`,focused:he,hasContentLeft:!!j,htmlFor:"htmlFor"in ve?ve.htmlFor:"",id:ve.id,isTextarea:we,rounded:oe,underlined:ie,withValue:!!pe,children:ge}),v(h,{animated:M,className:c(`${S}-container`,`${S}-container--${Se}`,{[`${S}-container--input`]:!we,[`${S}-container--textarea`]:we,[`${S}-container--read-only`]:A},Y),focused:he,isReadOnly:A,isTextarea:we,underlined:ie,children:k($,{animated:M,as:ge?"div":"label",bordered:ne,className:c(`${S}-wrapper`,`${S}-wrapper--${Se}`,{[`${S}-wrapper--bordered`]:ne,[`${S}-wrapper--underlined`]:ie,[`${S}-wrapper--shadow`]:K}),disabled:le,focused:he,isReadOnly:A,isTextarea:we,shadow:K,underlined:ie,children:[!ge&&te&&v(g,{className:`${S}-placeholder`,children:te}),I&&v(x,{bordered:ne,className:`${S}-label--left`,isDark:be,isDefaultStatus:"default"===F,underlined:ie,children:I}),j&&v(w,{applyStyles:q,className:c(`${S}-content`,`${S}-content--left`),clickable:V,onClick:e=>xe("left",e),children:j}),v(p,{ref:ue,"aria-multiline":we,"aria-placeholder":ye,"aria-readonly":A,"aria-required":Q,as:e,autoComplete:ee,bordered:ne,className:c({[`${S}`]:!we,[`${S}-textarea`]:we,[`${S}-disabled`]:le,[`${S}-rounded`]:oe,[`${S}-${S}-right-content`]:O,[`${S}-left-content`]:j}),"data-state":Se,disabled:le,focused:he,hasLeftContent:!!j,hasRightContent:!!O,isTextarea:we,placeholder:ye,readOnly:A,required:Q,type:"text",onBlur:e=>{fe(!1),Z&&Z(e)},onChange:e=>{le||A||(me(e.target.value),E&&E(e))},onFocus:e=>{fe(!0),_&&_(e)},...Ne,...ke}),J&&v(y,{animated:M,className:`${S}-clear-button`,disabled:le||A,hasContentRight:!!O,type:"button",underlined:ie,visible:Boolean(pe),onClick:e=>{if(e.preventDefault(),e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),me(""),H&&H(e),!ue.current)return;const t=((e,t)=>({...t,target:e,currentTarget:e}))(ue.current,e);t.target.value="",E&&E(t),ue.current.focus()},children:v(s,{fill:"currentColor"})}),O&&v(w,{applyStyles:U,className:c(`${S}-content`,`${S}-content--right`),clickable:V,onClick:e=>xe("right",e),children:O}),L&&v(x,{bordered:ne,className:`${S}-label--right`,isDark:be,isDefaultStatus:"default"===F,isRight:!0,underlined:ie,children:L})]})}),v(f,{className:`${S}-helper-text-container`,withValue:!!D,children:D&&v(b,{className:`${S}-helper-text`,children:D})})]})}));R.displayName="NextUI.Input",R.defaultProps=N,R.toString=()=>".nextui-input";export default R;